/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
function t(r,v){var p;p=function(l){var d,b,g;d=function(b){return function(e,a){return b.b.extend(e,{get stringifyable(){return a()}})}}(l);b=function(b,e){function a(){return 0}function m(a,c){return"string"===typeof a&&"string"===typeof c?a.localeCompare(c):a<=c?a<c?-1:0:1}function c(a,c){b.b.extend(a,{get onResultOf(){return this.g},get reverse(){return this.reverse},get callable(){return this.j}},{get g(){return function(c){return f(c,a)}},get reverse(){return function(){return c||k(a)}},get j(){return a}})}
function f(a,b){function n(c,n){return b(a(c),a(n))}c(n);e(n,function(){return{type:"by-function-comparator",J:a.stringifyable,comparator:b.stringifyable}});return n}function k(a){function b(c,f){return-a(c,f)}c(b,a);e(b,function(){return{type:"reversed-comparator",comparator:a.stringifyable}});return b}c(m);e(m,function(){return{type:"natural-comparator"}});c(a);e(a,function(){return{type:"indifferent-comparator"}});return{s:a,A:m}}(l,d);g=function(b,e){function a(a){b.b.extend(a,{get callable(){return this.j}},
{get j(){return a}})}return{u:function(b){function c(a){return a[b]}a(c);e(c,function(){return{type:"property-accessor",propertyName:b}});return c}}}(l,d);l=function(b,e){function a(){return!0}function m(){return!1}function c(a,c){b.b.extend(a,{get and(){return this.i},get negate(){return this.t},get onResultOf(){return this.g},get or(){return this.m},get callable(){return this.j}},{get i(){return function(c){return f([a,c])}},get t(){return function(){return c||d(a)}},get g(){return function(c){return k(c,
a)}},get m(){return function(c){return g([a,c])}},get j(){return a}})}function f(b){function f(a){for(var c=0,k=b.length;c<k;++c)if(!b[c](a))return!1;return!0}if(!b.length)return a;c(f);e(f,function(){return{type:"and-predicate",components:b.map(function(a){return a.stringifyable})}});return f}function k(a,b){function f(c){return b(a(c))}c(f);e(f,function(){return{type:"by-function-predicate",J:a.stringifyable,predicate:b.stringifyable}});return f}function d(a){function b(c){return!a(c)}c(b,a);e(b,
function(){return{type:"negated-predicate",predicate:a.stringifyable}});return b}function g(a){function b(c){for(var f=0,k=a.length;f<k;++f)if(a[f](c))return!0;return!1}if(!a.length)return m;c(b);e(b,function(){return{type:"or-predicate",components:a.map(function(a){return a.stringifyable})}});return b}c(m);e(m,function(){return{type:"always-false-predicate"}});c(a);e(a,function(){return{type:"always-true-predicate"}});return{s:m,v:a,i:f,I:function(a,b){function f(c){return a(c)}c(f);e(f,b);return f},
m:g,r:function(a){function b(c){return a.test(c)}c(b);e(b,function(){return{type:"regular-expression-predicate",r:a.source,W:!a.ignoreCase,multiline:a.multiline}});return b}}}(l,d);return function(b){return b}({k:b,c:g,predicates:l,M:d,R:function(b,e){return"function"===typeof e||"object"===typeof e?e.stringifyable||e:e}})}(function(){var l;l=function(){function d(b,d){return Object.prototype.hasOwnProperty.call(b,d)}return{w:function(b,d){if(b===d)return!0;var h=!!d&&"function"===typeof d.valueOf;
return!!b&&"function"===typeof b.valueOf&&h&&b.valueOf()===d.valueOf()},extend:function(b,d){Array.prototype.slice.call(arguments,1).forEach(function(d){for(var e=Object.keys(d),a=0,m=e.length;a<m;a++){var c=e[a],f=Object.getOwnPropertyDescriptor(d,c);void 0!==f&&f.enumerable&&Object.defineProperty(b,c,f)}});return b},H:function(b,g){for(var h in b)d(b,h)&&g(h,b[h])},q:d,N:function(b,g){var h={},e;for(e in b)d(b,e)&&(h[e]=g(b[e],e,b));return h}}}();return function(d){return d}(function(d,b,g,h){return{d:d,
c:b,b:g,n:h}}(function(d){function b(a){return a.filter(function(a,b,f){return f.lastIndexOf(a)===b})}function g(a,b){for(var c=a.length,f=-1,d=0;d<c;++d)if(b(a[d])){if(0<=f)throw Error("Multiple elements match the predicate.");f=d}return f}function h(a,b){return a&&"function"===typeof a.valueOf&&b&&"function"===typeof b.valueOf?a.valueOf()<=b.valueOf()?a.valueOf()<b.valueOf()?-1:0:1:a<=b?a<b?-1:0:1}function e(a,b){var c=a.length,f=Array(c),d=Array(c),e;for(e=0;e<c;++e)f[e]=e,d[e]=a[e];e=a;a=d;d=
e;f.sort(function(c,f){return b(a[c],a[f])||c-f});for(e=0;e<c;++e)d[e]=a[f[e]];return d}return{contains:function(a,b){return 0<=a.indexOf(b)},F:function(a){if(50<a.length){for(var e=a.length,c={},f,k=0;k<e;++k)if(f=a[k],"string"===typeof f)if(d.q(c,f))break;else c[f]=!0;else if(a.lastIndexOf(f)!==k)break;if(!(k>=e)){for(var g=a.slice(0,k);k<e;++k)f=a[k],"string"===typeof f?d.q(c,f)||(c[f]=!0,g.push(f)):a.lastIndexOf(f)===k&&g.push(f);a=g}}else a=b(a);return a},G:function(a,b){return Array.prototype.concat.apply([],
a.map(b))},O:function(a,b){var c=g(a,b);if(0>c)throw Error("None of the elements matches the predicate.");return a[c]},P:function(a,b){var c=g(a,b);return 0<=c?a[c]:null},Q:function(a,b){var c=b||h;window.chrome?c=e(a,c):(a.sort(c),c=a);return c}}}(l),function(){function d(b){return function(){return b}}return{fa:d(!0),Z:d(!1),ca:d(void 0),da:d(null),ga:d(0),B:d,K:function(b){return b}}}(),l,{C:function(d){return d.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})},D:function(d){return d.replace(/-([a-z])/g,
function(b){return b[1].toUpperCase()})},format:function(d){var b=arguments;return d.replace(/{(\d+)}/g,function(d,h){var e=parseInt(h,10)+1;return typeof b.length<=e?d:b[e]})}}))}());return function(l){return l}(function(l,d,b,g,h){function e(b,c){function d(a){return"*"+a}var e=c.toLowerCase()!==c;return 0<=c.indexOf("*")?a(b,c,e):a(b,"*"+c.replace(/([A-Z])/g,d)+"*",e)}function a(a,c,d){c="^"+c.split("*").map(m).join(".*")+"$";var e=new RegExp(c,d?"":"i"),g=a.renderValue;return b.predicates.I(function(a){return e.test(g(a))},
function(){return b.predicates.r(e).stringifyable})}function m(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var c=b.predicates.v;g.defineExtension("ko-grid-filtering",{A:[],V:function(a){return a.after("headers").insert("filters",h)},s:function(a,g,h){function l(a){var b=a.id;if(!m[b]){var f=d.observable("");h.extensions["ko-grid-view-state-storage"]&&h.extensions["ko-grid-view-state-storage"].modeIndependent.bind("filters["+b+"]",f);m[b]={text:f,predicate:d.pureComputed(function(){var b=
f();return b.length?e(a,b):c})}}return m[b]}var m={};this.__forColumn=l;a=d.pureComputed(function(){var a=h.columns.displayed().filter(function(a){return l(a).predicate()!==c}).map(function(a){return l(a).predicate().g(b.c.u(a.property))});return b.predicates.i(a)});var p=g.o&&g.o.U||300,u=g.o&&!1===g.o.enabled?a:a.extend({o:p}),q=d.observable(!0);this.__applied=q;h.data.predicates.push(d.pureComputed(function(){q(!1);return u()}));var r=h.data.rows.displayedSynchronized.subscribe(function(a){window.setTimeout(function(){q(q()||
!h.data.view.dirty()&&a)},5)});this.dispose=function(){r.dispose();u.dispose()}}});return g.declareExtensionAlias("filtering","ko-grid-filtering")}({},r,p,v,'<tr class="ko-grid-tr ko-grid-filter-row" data-bind="css: { applied: extensions.filtering.__applied }">\n    <td class="ko-grid-th ko-grid-filter-cell" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\'  }">\n        <input class="ko-grid-filter" type="text" data-bind="value: extensions.filtering.__forColumn(column()).text, valueUpdate: [\'keypress\', \'keyup\']"/>\n    </td>\n</tr>'))}
"function"===typeof define&&define.amd?define("knockout ko-grid ko-grid-view-state-storage ko-data-source ko-indexed-repeat ko-grid-view-modes".split(" "),t):window["ko-grid-filtering"]=t(window.ko,window.ko.bindingHandlers.grid);