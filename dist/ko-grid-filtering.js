/*
 Copyright (c) 2015, Ben Schulz
 License: BSD 3-clause (http://opensource.org/licenses/BSD-3-Clause)
*/
function q(g,m){return function(h){return h}(function(h,e,r,g){function n(){return!0}function m(c,b,a){function f(a){return"*"+a}var d=a.toLowerCase()!==a;return 0<=a.indexOf("*")?t(c,b,a,d):t(c,b,"*"+a.replace(/([A-Z])/g,f)+"*",d)}function t(c,b,a,f){a="^"+a.split("*").map(u).join(".*")+"$";var d=new RegExp(a,f?"":"i"),e=b.renderValue,k=c.data.valueSelector;return function(a){return d.test(e(k(a)))}}function u(c){return c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}r.defineExtension("ko-grid-filtering",
{c:[],e:function(c){return c.after("headers").insert("filters",g)},b:function(c,b,a){function f(c){var b=c.id;if(!d[b]){var p=e.observable("");a.extensions["ko-grid-view-state-storage"]&&a.extensions["ko-grid-view-state-storage"].modeIndependent.bind("filters["+b+"]",p);d[b]={text:p,predicate:e.pureComputed(function(){var b=p();return b.length?m(a,c,b):n})}}return d[b]}var d={};this.__forColumn=f;c=e.pureComputed(function(){var b=[];a.columns.displayed().forEach(function(a){var c=f(a).predicate();
c!==n&&b.push(function(b){return c(b[a.property])})});return b.length?function(a){for(var c=0;c<b.length;++c)if(!b[c](a))return!1;return!0}:n});var g=b.a&&b.a.d||150,k=b.a&&!1===b.a.enabled?c:c.extend({a:g}),l=e.observable(!0);this.__applied=l;a.data.predicates.push(e.pureComputed(function(){l(!1);return k()}));var h=a.data.rows.displayedSynchronized.subscribe(function(a){l(l()||a)});this.dispose=function(){h.dispose();k.dispose()}}});return r.declareExtensionAlias("filtering","ko-grid-filtering")}({},
g,m,'<tr class="ko-grid-tr ko-grid-filter-row" data-bind="css: { applied: extensions.filtering.__applied }">\n    <td class="ko-grid-th ko-grid-filter-cell" data-bind="indexedRepeat: { forEach: columns.displayed, indexedBy: \'id\', as: \'column\'  }">\n        <input class="ko-grid-filter" type="text" data-bind="value: extensions.filtering.__forColumn(column()).text, valueUpdate: [\'keypress\', \'keyup\']"/>\n    </td>\n</tr>'))}
"function"===typeof define&&define.amd?define("knockout ko-grid ko-grid-view-state-storage ko-data-source ko-indexed-repeat ko-grid-view-modes".split(" "),q):window["ko-grid-filtering"]=q(window.ko,window.ko.bindingHandlers.grid);
